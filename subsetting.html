<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R - Open Research Summer School – subsetting</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./load_data.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">R - Open Research Summer School</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" rel="" target="" aria-current="page">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./setup.html" rel="" target="">
 <span class="menu-text">Setup</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./the_big_picture.html" rel="" target="">
 <span class="menu-text">The big picture</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./packages.html" rel="" target="">
 <span class="menu-text">Packages</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./load_data.html" rel="" target="">
 <span class="menu-text">Load data</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./subsetting.html">Data manipulation and transformation</a></li><li class="breadcrumb-item"><a href="./subsetting.html">Subsetting data</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Workshop</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Getting Started</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Setup</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./the_big_picture.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The big picture</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Basics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Basic operations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_structures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data structures</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./load_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Load data</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Data manipulation and transformation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./subsetting.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Subsetting data</span></a>
  </div>
</li>
          <li class="sidebar-item">
 <span class="menu-text">manipulation.qmd</span>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#subsetting-data" id="toc-subsetting-data" class="nav-link active" data-scroll-target="#subsetting-data">Subsetting data</a>
  <ul class="collapse">
  <li><a href="#data-set" id="toc-data-set" class="nav-link" data-scroll-target="#data-set">Data set</a></li>
  <li><a href="#data-frames" id="toc-data-frames" class="nav-link" data-scroll-target="#data-frames">Data frames</a>
  <ul class="collapse">
  <li><a href="#base-r" id="toc-base-r" class="nav-link" data-scroll-target="#base-r">Base R</a></li>
  <li><a href="#tidyverse" id="toc-tidyverse" class="nav-link" data-scroll-target="#tidyverse">Tidyverse</a></li>
  </ul></li>
  <li><a href="#vectors" id="toc-vectors" class="nav-link" data-scroll-target="#vectors">Vectors</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises">Exercises</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="subsetting-data" class="level1">
<h1>Subsetting data</h1>
<p>Please take a look at the different <a href="./data_structures.html">data structures in R</a> if you are not familiar with them, before you start with this chapter.</p>
<section id="data-set" class="level2">
<h2 class="anchored" data-anchor-id="data-set">Data set</h2>
<p>Load the data set, which lies within the folder <code>raw_data</code> in my working directory:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>winners <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="at">file =</span> <span class="st">"./raw_data/winners.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s take a quick look:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(winners)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Category Year              Athlete    Nationality ID
1      Men 1981 Dick Beardsley (Tie)  United States  1
2      Men 1981  Inge Simonsen (Tie)         Norway NA
3      Men 1982           Hugh Jones United Kingdom  3
4      Men 1983         Mike Gratton United Kingdom  4
5      Men 1984     Charlie Spedding United Kingdom  5
6      Men 1985          Steve Jones United Kingdom  6</code></pre>
</div>
</div>
<p>So, this data frame seems to hold the winners of the london marathon, but their finishing times are missing. They are stored in another data set, but we will deal with that later. For now we want to look at how we can extract data from our data structures, so we can work with it.</p>
</section>
<section id="data-frames" class="level2">
<h2 class="anchored" data-anchor-id="data-frames">Data frames</h2>
<p>We will look at two ways to extract rows and columns from data frames.</p>
<section id="base-r" class="level3">
<h3 class="anchored" data-anchor-id="base-r">Base R</h3>
<p>In <code>Base R</code>, we use square brackets <code>[,]</code>. In front of the <code>,</code> we write the <strong>rows</strong> we want to extract:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the first and the fourth row</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>winners[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Category Year              Athlete    Nationality ID
1      Men 1981 Dick Beardsley (Tie)  United States  1
4      Men 1983         Mike Gratton United Kingdom  4</code></pre>
</div>
</div>
<p>Behind it the <strong>columns</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the second and the fourth column:</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>winners[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Year    Nationality
1   1981  United States
2   1981         Norway
3   1982 United Kingdom
4   1983 United Kingdom
5   1984 United Kingdom
6   1985 United Kingdom
7   1986          Japan
8   1987          Japan
9   1988        Denmark
10  1989          Kenya
11  1990 United Kingdom
12  1991   Soviet Union
13  1992       Portugal
14  1993 United Kingdom
15  1994         Mexico
16  1995         Mexico
17  1996         Mexico
18  1997       Portugal
19  1998          Spain
20  1999        Morocco
21  2000       Portugal
22  2001        Morocco
23  2002  United States
24  2003       Ethiopia
25  2004          Kenya
26  2005          Kenya
27  2006          Kenya
28  2007          Kenya
29  2008          Kenya
30  2009          Kenya
31  2010       Ethiopia
32  2011          Kenya
33  2012          Kenya
34  2013       Ethiopia
35  2014          Kenya
36  2015          Kenya
37  2016          Kenya
38  2017          Kenya
39  2018          Kenya
40  2019          Kenya
41  2020       Ethiopia
42  2021       Ethiopia
43  2022          Kenya
44  2023          Kenya
45  1981 United Kingdom
46  1982 United Kingdom
47  1983         Norway
48  1984         Norway
49  1985         Norway
50  1986         Norway
51  1987         Norway
52  1988         Norway
53  1989 United Kingdom
54  1990         Poland
55  1991       Portugal
56  1992        Germany
57  1993        Germany
58  1994        Germany
59  1995         Poland
60  1996 United Kingdom
61  1997          Kenya
62  1998        Ireland
63  1999          Kenya
64  2000          Kenya
65  2001       Ethiopia
66  2002 United Kingdom
67  2003 United Kingdom
68  2004          Kenya
69  2005 United Kingdom
70  2006  United States
71  2007          China
72  2008        Germany
73  2009        Germany
74  2010       Ethiopia
75  2011          Kenya
76  2012          Kenya
77  2013          Kenya
78  2014          Kenya
79  2015       Ethiopia
80  2016          Kenya
81  2017          Kenya
82  2018          Kenya
83  2019          Kenya
84  2020          Kenya
85  2021          Kenya
86  2022       Ethiopia
87  2023    Netherlands
88  1983 United Kingdom
89  1984        Ireland
90  1985 United Kingdom
91  1986        Ireland
92  1987 United Kingdom
93  1988         Canada
94  1989 United Kingdom
95  1990         Sweden
96  1991         France
97  1992         Canada
98  1993        Belgium
99  1994 United Kingdom
100 1995    Switzerland
101 1996 United Kingdom
102 1997 United Kingdom
103 1998    Switzerland
104 1999    Switzerland
105 2000 United Kingdom
106 2001         France
107 2002 United Kingdom
108 2003         France
109 2004         Mexico
110 2005         Mexico
111 2006 United Kingdom
112 2007 United Kingdom
113 2008 United Kingdom
114 2009      Australia
115 2010         Canada
116 2011 United Kingdom
117 2012 United Kingdom
118 2013      Australia
119 2014    Switzerland
120 2015  United States
121 2016    Switzerland
122 2017 United Kingdom
123 2018 United Kingdom
124 2019  United States
125 2020         Canada
126 2021    Switzerland
127 1983 United Kingdom
128 1984        Ireland
129 1985        Ireland
130 1986        Ireland
131 1987 United Kingdom
132 1988 United Kingdom
133 1989 United Kingdom
134 1990        Denmark
135 1991        Denmark
136 1992 United Kingdom
137 1993 United Kingdom
138 1994 United Kingdom
139 1995 United Kingdom
140 1996 United Kingdom
141 1997         Sweden
142 1998 United Kingdom
143 1999         Sweden
144 2000 United Kingdom
145 2001 United Kingdom
146 2002 United Kingdom
147 2003          Italy
148 2004          Italy
149 2005          Italy
150 2006          Italy
151 2007 United Kingdom
152 2008    Switzerland
153 2009  United States
154 2010          Japan
155 2011  United States
156 2012 United Kingdom
157 2013  United States
158 2014  United States
159 2015  United States
160 2016  United States
161 2017    Switzerland
162 2018      Australia
163 2019    Switzerland
164 2020    Netherlands
165 2021    Switzerland</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the columns by name:</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>winners[, <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Nationality"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Year    Nationality
1   1981  United States
2   1981         Norway
3   1982 United Kingdom
4   1983 United Kingdom
5   1984 United Kingdom
6   1985 United Kingdom
7   1986          Japan
8   1987          Japan
9   1988        Denmark
10  1989          Kenya
11  1990 United Kingdom
12  1991   Soviet Union
13  1992       Portugal
14  1993 United Kingdom
15  1994         Mexico
16  1995         Mexico
17  1996         Mexico
18  1997       Portugal
19  1998          Spain
20  1999        Morocco
21  2000       Portugal
22  2001        Morocco
23  2002  United States
24  2003       Ethiopia
25  2004          Kenya
26  2005          Kenya
27  2006          Kenya
28  2007          Kenya
29  2008          Kenya
30  2009          Kenya
31  2010       Ethiopia
32  2011          Kenya
33  2012          Kenya
34  2013       Ethiopia
35  2014          Kenya
36  2015          Kenya
37  2016          Kenya
38  2017          Kenya
39  2018          Kenya
40  2019          Kenya
41  2020       Ethiopia
42  2021       Ethiopia
43  2022          Kenya
44  2023          Kenya
45  1981 United Kingdom
46  1982 United Kingdom
47  1983         Norway
48  1984         Norway
49  1985         Norway
50  1986         Norway
51  1987         Norway
52  1988         Norway
53  1989 United Kingdom
54  1990         Poland
55  1991       Portugal
56  1992        Germany
57  1993        Germany
58  1994        Germany
59  1995         Poland
60  1996 United Kingdom
61  1997          Kenya
62  1998        Ireland
63  1999          Kenya
64  2000          Kenya
65  2001       Ethiopia
66  2002 United Kingdom
67  2003 United Kingdom
68  2004          Kenya
69  2005 United Kingdom
70  2006  United States
71  2007          China
72  2008        Germany
73  2009        Germany
74  2010       Ethiopia
75  2011          Kenya
76  2012          Kenya
77  2013          Kenya
78  2014          Kenya
79  2015       Ethiopia
80  2016          Kenya
81  2017          Kenya
82  2018          Kenya
83  2019          Kenya
84  2020          Kenya
85  2021          Kenya
86  2022       Ethiopia
87  2023    Netherlands
88  1983 United Kingdom
89  1984        Ireland
90  1985 United Kingdom
91  1986        Ireland
92  1987 United Kingdom
93  1988         Canada
94  1989 United Kingdom
95  1990         Sweden
96  1991         France
97  1992         Canada
98  1993        Belgium
99  1994 United Kingdom
100 1995    Switzerland
101 1996 United Kingdom
102 1997 United Kingdom
103 1998    Switzerland
104 1999    Switzerland
105 2000 United Kingdom
106 2001         France
107 2002 United Kingdom
108 2003         France
109 2004         Mexico
110 2005         Mexico
111 2006 United Kingdom
112 2007 United Kingdom
113 2008 United Kingdom
114 2009      Australia
115 2010         Canada
116 2011 United Kingdom
117 2012 United Kingdom
118 2013      Australia
119 2014    Switzerland
120 2015  United States
121 2016    Switzerland
122 2017 United Kingdom
123 2018 United Kingdom
124 2019  United States
125 2020         Canada
126 2021    Switzerland
127 1983 United Kingdom
128 1984        Ireland
129 1985        Ireland
130 1986        Ireland
131 1987 United Kingdom
132 1988 United Kingdom
133 1989 United Kingdom
134 1990        Denmark
135 1991        Denmark
136 1992 United Kingdom
137 1993 United Kingdom
138 1994 United Kingdom
139 1995 United Kingdom
140 1996 United Kingdom
141 1997         Sweden
142 1998 United Kingdom
143 1999         Sweden
144 2000 United Kingdom
145 2001 United Kingdom
146 2002 United Kingdom
147 2003          Italy
148 2004          Italy
149 2005          Italy
150 2006          Italy
151 2007 United Kingdom
152 2008    Switzerland
153 2009  United States
154 2010          Japan
155 2011  United States
156 2012 United Kingdom
157 2013  United States
158 2014  United States
159 2015  United States
160 2016  United States
161 2017    Switzerland
162 2018      Australia
163 2019    Switzerland
164 2020    Netherlands
165 2021    Switzerland</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Or only the column Year (and turn it into a vector right away):</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>winners<span class="sc">$</span>Year</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 1981 1981 1982 1983 1984 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994
 [16] 1995 1996 1997 1998 1999 2000 2001 2002 2003 2004 2005 2006 2007 2008 2009
 [31] 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021 2022 2023 1981
 [46] 1982 1983 1984 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995 1996
 [61] 1997 1998 1999 2000 2001 2002 2003 2004 2005 2006 2007 2008 2009 2010 2011
 [76] 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021 2022 2023 1983 1984 1985
 [91] 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995 1996 1997 1998 1999 2000
[106] 2001 2002 2003 2004 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015
[121] 2016 2017 2018 2019 2020 2021 1983 1984 1985 1986 1987 1988 1989 1990 1991
[136] 1992 1993 1994 1995 1996 1997 1998 1999 2000 2001 2002 2003 2004 2005 2006
[151] 2007 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021</code></pre>
</div>
</div>
<p>And of course we can combine both calls:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>winners[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>), <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Year    Nationality
1 1981  United States
4 1983 United Kingdom</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>winners[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>), <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Nationality"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Year    Nationality
1 1981  United States
4 1983 United Kingdom</code></pre>
</div>
</div>
<p>We can also use Boolean values (every row/column must get a value here, so we extract the first 100 rows by repeating <code>TRUE</code> 100 times, and than add <code>FALSE</code> for the remaining rows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>winners[<span class="fu">c</span>(<span class="fu">rep</span>(<span class="cn">TRUE</span>, <span class="dv">100</span>), <span class="fu">rep</span>(<span class="cn">FALSE</span>, <span class="dv">65</span>)), <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Category    Nationality  ID
1              Men  United States   1
2              Men         Norway  NA
3              Men United Kingdom   3
4              Men United Kingdom   4
5              Men United Kingdom   5
6              Men United Kingdom   6
7              Men          Japan   7
8              Men          Japan   8
9              Men        Denmark   9
10             Men          Kenya  10
11             Men United Kingdom  11
12             Men   Soviet Union  12
13             Men       Portugal  13
14             Men United Kingdom  14
15             Men         Mexico  15
16             Men         Mexico  16
17             Men         Mexico  17
18             Men       Portugal  18
19             Men          Spain  19
20             Men        Morocco  20
21             Men       Portugal  21
22             Men        Morocco  22
23             Men  United States  23
24             Men       Ethiopia  NA
25             Men          Kenya  25
26             Men          Kenya  26
27             Men          Kenya  27
28             Men          Kenya  28
29             Men          Kenya  29
30             Men          Kenya  30
31             Men       Ethiopia  31
32             Men          Kenya  32
33             Men          Kenya  33
34             Men       Ethiopia  34
35             Men          Kenya  NA
36             Men          Kenya  36
37             Men          Kenya  37
38             Men          Kenya  38
39             Men          Kenya  39
40             Men          Kenya  40
41             Men       Ethiopia  41
42             Men       Ethiopia  42
43             Men          Kenya  43
44             Men          Kenya  44
45           Women United Kingdom  45
46           Women United Kingdom  46
47           Women         Norway  47
48           Women         Norway  48
49           Women         Norway  49
50           Women         Norway  50
51           Women         Norway  51
52           Women         Norway  52
53           Women United Kingdom  53
54           Women         Poland  54
55           Women       Portugal  55
56           Women        Germany  56
57           Women        Germany  57
58           Women        Germany  58
59           Women         Poland  59
60           Women United Kingdom  60
61           Women          Kenya  61
62           Women        Ireland  62
63           Women          Kenya  63
64           Women          Kenya  64
65           Women       Ethiopia  65
66           Women United Kingdom  66
67           Women United Kingdom  67
68           Women          Kenya  68
69           Women United Kingdom  69
70           Women  United States  70
71           Women          China  71
72           Women        Germany  72
73           Women        Germany  73
74           Women       Ethiopia  74
75           Women          Kenya  75
76           Women          Kenya  76
77           Women          Kenya  77
78           Women          Kenya  78
79           Women       Ethiopia  79
80           Women          Kenya  80
81           Women          Kenya  81
82           Women          Kenya  82
83           Women          Kenya  83
84           Women          Kenya  84
85           Women          Kenya  85
86           Women       Ethiopia  86
87           Women    Netherlands  87
88  Wheelchair Men United Kingdom  88
89  Wheelchair Men        Ireland  89
90  Wheelchair Men United Kingdom  90
91  Wheelchair Men        Ireland  91
92  Wheelchair Men United Kingdom  92
93  Wheelchair Men         Canada  93
94  Wheelchair Men United Kingdom  94
95  Wheelchair Men         Sweden  NA
96  Wheelchair Men         France  96
97  Wheelchair Men         Canada  97
98  Wheelchair Men        Belgium  98
99  Wheelchair Men United Kingdom  99
100 Wheelchair Men    Switzerland 100</code></pre>
</div>
</div>
<p>Now the stuff we looked at in <a href="https://nickhaf.github.io/r_tutorial/basics.html#comparisons-and-logical-operators">logical operators</a> comes in handy! We can filter rows which match some condition. For example, we might want to look at all winners from Kenya:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>winners[winners<span class="sc">$</span>Nationality <span class="sc">==</span> <span class="st">"Kenya"</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Category Year                    Athlete Nationality ID
10      Men 1989          Douglas Wakiihuri       Kenya 10
25      Men 2004                Evans Rutto       Kenya 25
26      Men 2005                 Martin Lel       Kenya 26
27      Men 2006                 Felix Limo       Kenya 27
28      Men 2007                 Martin Lel       Kenya 28
29      Men 2008                 Martin Lel       Kenya 29
30      Men 2009             Samuel Wanjiru       Kenya 30
32      Men 2011 Emmanuel Kipchirchir Mutai       Kenya 32
33      Men 2012   Wilson Kipsang Kiprotich       Kenya 33
35      Men 2014   Wilson Kipsang Kiprotich       Kenya NA
36      Men 2015             Eliud Kipchoge       Kenya 36
37      Men 2016             Eliud Kipchoge       Kenya 37
38      Men 2017             Daniel Wanjiru       Kenya 38
39      Men 2018             Eliud Kipchoge       Kenya 39
40      Men 2019             Eliud Kipchoge       Kenya 40
43      Men 2022               Amos Kipruto       Kenya 43
44      Men 2023              Kelvin Kiptum       Kenya 44
61    Women 1997           Joyce Chepchumba       Kenya 61
63    Women 1999           Joyce Chepchumba       Kenya 63
64    Women 2000              Tegla Loroupe       Kenya 64
68    Women 2004             Margaret Okayo       Kenya 68
75    Women 2011     Mary Jepkosgei Keitany       Kenya 75
76    Women 2012     Mary Jepkosgei Keitany       Kenya 76
77    Women 2013             Priscah Jeptoo       Kenya 77
78    Women 2014              Edna Kiplagat       Kenya 78
80    Women 2016             Jemima Sumgong       Kenya 80
81    Women 2017     Mary Jepkosgei Keitany       Kenya 81
82    Women 2018           Vivian Cheruiyot       Kenya 82
83    Women 2019              Brigid Kosgei       Kenya 83
84    Women 2020              Brigid Kosgei       Kenya 84
85    Women 2021        Joyciline Jepkosgei       Kenya 85</code></pre>
</div>
</div>
<p>Take a close look at the comparison before the <code>,</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>winners<span class="sc">$</span>Nationality <span class="sc">==</span> <span class="st">"Kenya"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE
 [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [25]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE
 [37]  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE
 [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [61]  TRUE FALSE  TRUE  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE
 [73] FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
 [85]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[145] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[157] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
</div>
<p><code>winners$Nationality</code> is a vector, so comparing its values to a specified value yields a logical vector with the respective <code>TRUE</code> and <code>FALSE</code> values. We can insert this logical vector in front of the <code>,</code> to extract all rows corresponding to that condition.</p>
<p>If we want to extract multiple nationalities at once, we need the <code>%in%</code> operator:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>winners[winners<span class="sc">$</span>Nationality <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Kenya"</span>, <span class="st">"Germany"</span>, <span class="st">"Norway"</span>), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Category Year                    Athlete Nationality ID
2       Men 1981        Inge Simonsen (Tie)      Norway NA
10      Men 1989          Douglas Wakiihuri       Kenya 10
25      Men 2004                Evans Rutto       Kenya 25
26      Men 2005                 Martin Lel       Kenya 26
27      Men 2006                 Felix Limo       Kenya 27
28      Men 2007                 Martin Lel       Kenya 28
29      Men 2008                 Martin Lel       Kenya 29
30      Men 2009             Samuel Wanjiru       Kenya 30
32      Men 2011 Emmanuel Kipchirchir Mutai       Kenya 32
33      Men 2012   Wilson Kipsang Kiprotich       Kenya 33
35      Men 2014   Wilson Kipsang Kiprotich       Kenya NA
36      Men 2015             Eliud Kipchoge       Kenya 36
37      Men 2016             Eliud Kipchoge       Kenya 37
38      Men 2017             Daniel Wanjiru       Kenya 38
39      Men 2018             Eliud Kipchoge       Kenya 39
40      Men 2019             Eliud Kipchoge       Kenya 40
43      Men 2022               Amos Kipruto       Kenya 43
44      Men 2023              Kelvin Kiptum       Kenya 44
47    Women 1983                Grete Waitz      Norway 47
48    Women 1984         Ingrid Kristiansen      Norway 48
49    Women 1985         Ingrid Kristiansen      Norway 49
50    Women 1986                Grete Waitz      Norway 50
51    Women 1987         Ingrid Kristiansen      Norway 51
52    Women 1988         Ingrid Kristiansen      Norway 52
56    Women 1992        Katrin Dörre-Heinig     Germany 56
57    Women 1993        Katrin Dörre-Heinig     Germany 57
58    Women 1994        Katrin Dörre-Heinig     Germany 58
61    Women 1997           Joyce Chepchumba       Kenya 61
63    Women 1999           Joyce Chepchumba       Kenya 63
64    Women 2000              Tegla Loroupe       Kenya 64
68    Women 2004             Margaret Okayo       Kenya 68
72    Women 2008            Irina Mikitenko     Germany 72
73    Women 2009            Irina Mikitenko     Germany 73
75    Women 2011     Mary Jepkosgei Keitany       Kenya 75
76    Women 2012     Mary Jepkosgei Keitany       Kenya 76
77    Women 2013             Priscah Jeptoo       Kenya 77
78    Women 2014              Edna Kiplagat       Kenya 78
80    Women 2016             Jemima Sumgong       Kenya 80
81    Women 2017     Mary Jepkosgei Keitany       Kenya 81
82    Women 2018           Vivian Cheruiyot       Kenya 82
83    Women 2019              Brigid Kosgei       Kenya 83
84    Women 2020              Brigid Kosgei       Kenya 84
85    Women 2021        Joyciline Jepkosgei       Kenya 85</code></pre>
</div>
</div>
<p>By the way, if we want to save our extracted data frame, we can assign it a new name (otherwise it will only get printed into the console, but you cant work further with it):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>winners_nat <span class="ot">&lt;-</span> winners[winners<span class="sc">$</span>Nationality <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Kenya"</span>, <span class="st">"Germany"</span>, <span class="st">"Norway"</span>), ]</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>winners_nat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Category Year                    Athlete Nationality ID
2       Men 1981        Inge Simonsen (Tie)      Norway NA
10      Men 1989          Douglas Wakiihuri       Kenya 10
25      Men 2004                Evans Rutto       Kenya 25
26      Men 2005                 Martin Lel       Kenya 26
27      Men 2006                 Felix Limo       Kenya 27
28      Men 2007                 Martin Lel       Kenya 28
29      Men 2008                 Martin Lel       Kenya 29
30      Men 2009             Samuel Wanjiru       Kenya 30
32      Men 2011 Emmanuel Kipchirchir Mutai       Kenya 32
33      Men 2012   Wilson Kipsang Kiprotich       Kenya 33
35      Men 2014   Wilson Kipsang Kiprotich       Kenya NA
36      Men 2015             Eliud Kipchoge       Kenya 36
37      Men 2016             Eliud Kipchoge       Kenya 37
38      Men 2017             Daniel Wanjiru       Kenya 38
39      Men 2018             Eliud Kipchoge       Kenya 39
40      Men 2019             Eliud Kipchoge       Kenya 40
43      Men 2022               Amos Kipruto       Kenya 43
44      Men 2023              Kelvin Kiptum       Kenya 44
47    Women 1983                Grete Waitz      Norway 47
48    Women 1984         Ingrid Kristiansen      Norway 48
49    Women 1985         Ingrid Kristiansen      Norway 49
50    Women 1986                Grete Waitz      Norway 50
51    Women 1987         Ingrid Kristiansen      Norway 51
52    Women 1988         Ingrid Kristiansen      Norway 52
56    Women 1992        Katrin Dörre-Heinig     Germany 56
57    Women 1993        Katrin Dörre-Heinig     Germany 57
58    Women 1994        Katrin Dörre-Heinig     Germany 58
61    Women 1997           Joyce Chepchumba       Kenya 61
63    Women 1999           Joyce Chepchumba       Kenya 63
64    Women 2000              Tegla Loroupe       Kenya 64
68    Women 2004             Margaret Okayo       Kenya 68
72    Women 2008            Irina Mikitenko     Germany 72
73    Women 2009            Irina Mikitenko     Germany 73
75    Women 2011     Mary Jepkosgei Keitany       Kenya 75
76    Women 2012     Mary Jepkosgei Keitany       Kenya 76
77    Women 2013             Priscah Jeptoo       Kenya 77
78    Women 2014              Edna Kiplagat       Kenya 78
80    Women 2016             Jemima Sumgong       Kenya 80
81    Women 2017     Mary Jepkosgei Keitany       Kenya 81
82    Women 2018           Vivian Cheruiyot       Kenya 82
83    Women 2019              Brigid Kosgei       Kenya 83
84    Women 2020              Brigid Kosgei       Kenya 84
85    Women 2021        Joyciline Jepkosgei       Kenya 85</code></pre>
</div>
</div>
<p>We can also combine multiple logical vectors using <code>&amp;</code> (“and”) and <code>|</code> (“or”). For example, we might want to look at all Kenyan winners before the year 2000:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>winners[winners<span class="sc">$</span>Nationality <span class="sc">==</span> <span class="st">"Kenya"</span> <span class="sc">&amp;</span> winners<span class="sc">$</span>Year <span class="sc">&lt;</span> <span class="dv">2000</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Category Year           Athlete Nationality ID
10      Men 1989 Douglas Wakiihuri       Kenya 10
61    Women 1997  Joyce Chepchumba       Kenya 61
63    Women 1999  Joyce Chepchumba       Kenya 63</code></pre>
</div>
</div>
<p>Or at all women winners from Australia in the wheelchair category, and the male winners from the United States in the wheelchair category:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>winners[(winners<span class="sc">$</span>Category <span class="sc">==</span> <span class="st">"Wheelchair Women"</span> <span class="sc">&amp;</span> winners<span class="sc">$</span>Nationality <span class="sc">==</span> <span class="st">"Australia"</span>) <span class="sc">|</span> (winners<span class="sc">$</span>Category <span class="sc">==</span> <span class="st">"Wheelchair Men"</span> <span class="sc">&amp;</span> winners<span class="sc">$</span>Nationality <span class="sc">==</span> <span class="st">"United States"</span>), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            Category Year            Athlete   Nationality  ID
120   Wheelchair Men 2015        Josh George United States 120
124   Wheelchair Men 2019   Daniel Romanchuk United States 124
162 Wheelchair Women 2018 Madison de Rozario     Australia 162</code></pre>
</div>
</div>
<p>In the long run, always having to define the data frame multiple time in each row can become a bit annoying and clutters the code. Enter, the <code>filter()</code> function:</p>
</section>
<section id="tidyverse" class="level3">
<h3 class="anchored" data-anchor-id="tidyverse">Tidyverse</h3>
<p>The <code>dplyr</code> package is part of the <code>tidyverse</code> and provides a grammar of data manipulation. We can use <code>filter()</code> to subset rows from a data frame:</p>
<div class="tidy">
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(winners, Nationality <span class="sc">==</span> <span class="st">"Kenya"</span>, Year <span class="sc">&lt;</span> <span class="dv">2000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Category Year           Athlete Nationality ID
1      Men 1989 Douglas Wakiihuri       Kenya 10
2    Women 1997  Joyce Chepchumba       Kenya 61
3    Women 1999  Joyce Chepchumba       Kenya 63</code></pre>
</div>
</div>
</div>
<p>Note how we can just write our conditions without connecting them with <code>&amp;</code> (<code>filter()</code> does that automatically for us). Also, we don’t have to put the column names into <code>""</code>, because <code>filter()</code> knows that this are column names of the <code>winners</code> data frame, which makes coding a bit more pleasant.</p>
<p>For extracting columns, we need <code>select()</code>:</p>
<div class="tidy">
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(winners, Year, Athlete)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Year                    Athlete
1   1981       Dick Beardsley (Tie)
2   1981        Inge Simonsen (Tie)
3   1982                 Hugh Jones
4   1983               Mike Gratton
5   1984           Charlie Spedding
6   1985                Steve Jones
7   1986             Toshihiko Seko
8   1987           Hiromi Taniguchi
9   1988           Henrik Jørgensen
10  1989          Douglas Wakiihuri
11  1990            Allister Hutton
12  1991            Yakov Tolstikov
13  1992              António Pinto
14  1993              Eamonn Martin
15  1994             Dionicio Cerón
16  1995             Dionicio Cerón
17  1996             Dionicio Cerón
18  1997              António Pinto
19  1998                 Abel Antón
20  1999      Abdelkader El Mouaziz
21  2000              António Pinto
22  2001      Abdelkader El Mouaziz
23  2002          Khalid Khannouchi
24  2003            Gezahegne Abera
25  2004                Evans Rutto
26  2005                 Martin Lel
27  2006                 Felix Limo
28  2007                 Martin Lel
29  2008                 Martin Lel
30  2009             Samuel Wanjiru
31  2010             Tsegaye Kebede
32  2011 Emmanuel Kipchirchir Mutai
33  2012   Wilson Kipsang Kiprotich
34  2013             Tsegaye Kebede
35  2014   Wilson Kipsang Kiprotich
36  2015             Eliud Kipchoge
37  2016             Eliud Kipchoge
38  2017             Daniel Wanjiru
39  2018             Eliud Kipchoge
40  2019             Eliud Kipchoge
41  2020          Shura Kitata Tola
42  2021                Sisay Lemma
43  2022               Amos Kipruto
44  2023              Kelvin Kiptum
45  1981                Joyce Smith
46  1982                Joyce Smith
47  1983                Grete Waitz
48  1984         Ingrid Kristiansen
49  1985         Ingrid Kristiansen
50  1986                Grete Waitz
51  1987         Ingrid Kristiansen
52  1988         Ingrid Kristiansen
53  1989            Véronique Marot
54  1990               Wanda Panfil
55  1991                  Rosa Mota
56  1992        Katrin Dörre-Heinig
57  1993        Katrin Dörre-Heinig
58  1994        Katrin Dörre-Heinig
59  1995        Małgorzata Sobańska
60  1996               Liz McColgan
61  1997           Joyce Chepchumba
62  1998        Catherina McKiernan
63  1999           Joyce Chepchumba
64  2000              Tegla Loroupe
65  2001               Derartu Tulu
66  2002            Paula Radcliffe
67  2003            Paula Radcliffe
68  2004             Margaret Okayo
69  2005            Paula Radcliffe
70  2006               Deena Kastor
71  2007               Zhou Chunxiu
72  2008            Irina Mikitenko
73  2009            Irina Mikitenko
74  2010           Aselefech Mergia
75  2011     Mary Jepkosgei Keitany
76  2012     Mary Jepkosgei Keitany
77  2013             Priscah Jeptoo
78  2014              Edna Kiplagat
79  2015                Tigist Tufa
80  2016             Jemima Sumgong
81  2017     Mary Jepkosgei Keitany
82  2018           Vivian Cheruiyot
83  2019              Brigid Kosgei
84  2020              Brigid Kosgei
85  2021        Joyciline Jepkosgei
86  2022         Yalemzerf Yehualaw
87  2023               Sifan Hassan
88  1983               Gordon Perry
89  1984                Kevin Breen
90  1985               Chris Hallam
91  1986             Gerry O'Rourke
92  1987               Chris Hallam
93  1988                  Ted Vince
94  1989              David Holding
95  1990             Håkan Ericsson
96  1991            Farid Amarouche
97  1992              Daniel Wesley
98  1993            George Vandamme
99  1994              David Holding
100 1995                 Heinz Frei
101 1996              David Holding
102 1997              David Holding
103 1998                 Heinz Frei
104 1999                 Heinz Frei
105 2000             Kevin Papworth
106 2001            Denis Lemeunier
107 2002                 David Weir
108 2003               Joël Jeannot
109 2004               Saúl Mendoza
110 2005               Saúl Mendoza
111 2006                 David Weir
112 2007                 David Weir
113 2008                 David Weir
114 2009              Kurt Fearnley
115 2010               Josh Cassidy
116 2011                 David Weir
117 2012                 David Weir
118 2013              Kurt Fearnley
119 2014                 Marcel Hug
120 2015                Josh George
121 2016                 Marcel Hug
122 2017                 David Weir
123 2018                 David Weir
124 2019           Daniel Romanchuk
125 2020              Brent Lakatos
126 2021                 Marcel Hug
127 1983               Denise Smith
128 1984                Kay McShane
129 1985                Kay McShane
130 1986                Kay McShane
131 1987             Karen Davidson
132 1988             Karen Davidson
133 1989            Josie Cichockyj
134 1990              Connie Hansen
135 1991              Connie Hansen
136 1992        Tanni Grey-Thompson
137 1993                  Rose Hill
138 1994        Tanni Grey-Thompson
139 1995                  Rose Hill
140 1996        Tanni Grey-Thompson
141 1997         Monica Wetterström
142 1998        Tanni Grey-Thompson
143 1999         Monica Wetterström
144 2000               Sarah Piercy
145 2001        Tanni Grey-Thompson
146 2002        Tanni Grey-Thompson
147 2003       Francesca Porcellato
148 2004       Francesca Porcellato
149 2005       Francesca Porcellato
150 2006       Francesca Porcellato
151 2007               Shelly Woods
152 2008                Sandra Graf
153 2009             Amanda McGrory
154 2010            Wakako Tsuchida
155 2011             Amanda McGrory
156 2012               Shelly Woods
157 2013           Tatyana McFadden
158 2014           Tatyana McFadden
159 2015           Tatyana McFadden
160 2016           Tatyana McFadden
161 2017              Manuela Schär
162 2018         Madison de Rozario
163 2019              Manuela Schär
164 2020            Nikita den Boer
165 2021              Manuela Schär</code></pre>
</div>
</div>
</div>
<section id="remarks-the-pipe-operator" class="level4">
<h4 class="anchored" data-anchor-id="remarks-the-pipe-operator">Remarks: the pipe operator</h4>
<p>Hold on! Normally, we wouldn’t write <code>tidyverse</code> code like that. Instead, we would use the pipe operator <code>%&gt;%</code> (<em>than do</em>), which makes it easy to connect multiple function calls:</p>
<div class="tidy">
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>winners <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Nationality <span class="sc">==</span> <span class="st">"Kenya"</span>, Year <span class="sc">&lt;</span> <span class="dv">2000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Category Year           Athlete Nationality ID
1      Men 1989 Douglas Wakiihuri       Kenya 10
2    Women 1997  Joyce Chepchumba       Kenya 61
3    Women 1999  Joyce Chepchumba       Kenya 63</code></pre>
</div>
</div>
</div>
<p>Here, we first input the data frame we want to manipulate. Than we filter, as specified by the pipe operator. Like this, we can easily connect multiple function calls instead of nesting them within multiple brackets, which increases the readability:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>winners[winners<span class="sc">$</span>Year <span class="sc">&gt;</span> <span class="dv">2000</span> <span class="sc">&amp;</span> winners<span class="sc">$</span>Category <span class="sc">==</span> <span class="st">"Women"</span>, <span class="fu">c</span>(<span class="st">"Category"</span>, <span class="st">"Year"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Category Year
65    Women 2001
66    Women 2002
67    Women 2003
68    Women 2004
69    Women 2005
70    Women 2006
71    Women 2007
72    Women 2008
73    Women 2009
74    Women 2010
75    Women 2011
76    Women 2012
77    Women 2013
78    Women 2014
79    Women 2015
80    Women 2016
81    Women 2017
82    Women 2018
83    Women 2019
84    Women 2020
85    Women 2021
86    Women 2022
87    Women 2023</code></pre>
</div>
</div>
<p>becomes:</p>
<div class="tidy">
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>winners <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">&gt;</span> <span class="dv">2000</span>, Category <span class="sc">==</span> <span class="st">"Women"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Category, Year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Category Year
1     Women 2001
2     Women 2002
3     Women 2003
4     Women 2004
5     Women 2005
6     Women 2006
7     Women 2007
8     Women 2008
9     Women 2009
10    Women 2010
11    Women 2011
12    Women 2012
13    Women 2013
14    Women 2014
15    Women 2015
16    Women 2016
17    Women 2017
18    Women 2018
19    Women 2019
20    Women 2020
21    Women 2021
22    Women 2022
23    Women 2023</code></pre>
</div>
</div>
</div>
<p>Much nicer to read, right?</p>
<p>Some notes on this syntax: If we don’t have any additional arguments we want to put into the function, we can just write the function name without any brackets. The pipe operator will give the result of the last function as input into the next function. If we want to clearly state which of the function arguments should receive the input, we can write a <code>.</code>, which can be read as <em>output of the previous function call</em>.</p>
</section>
</section>
</section>
<section id="vectors" class="level2">
<h2 class="anchored" data-anchor-id="vectors">Vectors</h2>
<p>Finally, let’s take a quick look at how to extract elements from a vector. It’s pretty straight forward: we just put the position of the element we want to extract behind the vector in square brackets:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>vec_athlete <span class="ot">&lt;-</span> winners<span class="sc">$</span>Athlete <span class="co"># remember: `$` returns a vector</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>vec_athlete[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Inge Simonsen (Tie)"</code></pre>
</div>
</div>
<p>Of course we can also do that for multiple elements:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>vec_athlete[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Inge Simonsen (Tie)" "Hugh Jones"          "Mike Gratton"       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Or, less to write:</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>vec_athlete[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Inge Simonsen (Tie)" "Hugh Jones"          "Mike Gratton"       </code></pre>
</div>
</div>
<p>Another way would be to provide a logical vector, which defines for each position, if we want to extract the element or not (like we already did for data frames):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>vec_athlete[<span class="fu">c</span>(<span class="fu">rep</span>(<span class="cn">TRUE</span>, <span class="dv">100</span>), <span class="fu">rep</span>(<span class="cn">FALSE</span>, <span class="dv">65</span>))]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Dick Beardsley (Tie)"       "Inge Simonsen (Tie)"       
  [3] "Hugh Jones"                 "Mike Gratton"              
  [5] "Charlie Spedding"           "Steve Jones"               
  [7] "Toshihiko Seko"             "Hiromi Taniguchi"          
  [9] "Henrik Jørgensen"           "Douglas Wakiihuri"         
 [11] "Allister Hutton"            "Yakov Tolstikov"           
 [13] "António Pinto"              "Eamonn Martin"             
 [15] "Dionicio Cerón"             "Dionicio Cerón"            
 [17] "Dionicio Cerón"             "António Pinto"             
 [19] "Abel Antón"                 "Abdelkader El Mouaziz"     
 [21] "António Pinto"              "Abdelkader El Mouaziz"     
 [23] "Khalid Khannouchi"          "Gezahegne Abera"           
 [25] "Evans Rutto"                "Martin Lel"                
 [27] "Felix Limo"                 "Martin Lel"                
 [29] "Martin Lel"                 "Samuel Wanjiru"            
 [31] "Tsegaye Kebede"             "Emmanuel Kipchirchir Mutai"
 [33] "Wilson Kipsang Kiprotich"   "Tsegaye Kebede"            
 [35] "Wilson Kipsang Kiprotich"   "Eliud Kipchoge"            
 [37] "Eliud Kipchoge"             "Daniel Wanjiru"            
 [39] "Eliud Kipchoge"             "Eliud Kipchoge"            
 [41] "Shura Kitata Tola"          "Sisay Lemma"               
 [43] "Amos Kipruto"               "Kelvin Kiptum"             
 [45] "Joyce Smith"                "Joyce Smith"               
 [47] "Grete Waitz"                "Ingrid Kristiansen"        
 [49] "Ingrid Kristiansen"         "Grete Waitz"               
 [51] "Ingrid Kristiansen"         "Ingrid Kristiansen"        
 [53] "Véronique Marot"            "Wanda Panfil"              
 [55] "Rosa Mota"                  "Katrin Dörre-Heinig"       
 [57] "Katrin Dörre-Heinig"        "Katrin Dörre-Heinig"       
 [59] "Małgorzata Sobańska"        "Liz McColgan"              
 [61] "Joyce Chepchumba"           "Catherina McKiernan"       
 [63] "Joyce Chepchumba"           "Tegla Loroupe"             
 [65] "Derartu Tulu"               "Paula Radcliffe"           
 [67] "Paula Radcliffe"            "Margaret Okayo"            
 [69] "Paula Radcliffe"            "Deena Kastor"              
 [71] "Zhou Chunxiu"               "Irina Mikitenko"           
 [73] "Irina Mikitenko"            "Aselefech Mergia"          
 [75] "Mary Jepkosgei Keitany"     "Mary Jepkosgei Keitany"    
 [77] "Priscah Jeptoo"             "Edna Kiplagat"             
 [79] "Tigist Tufa"                "Jemima Sumgong"            
 [81] "Mary Jepkosgei Keitany"     "Vivian Cheruiyot"          
 [83] "Brigid Kosgei"              "Brigid Kosgei"             
 [85] "Joyciline Jepkosgei"        "Yalemzerf Yehualaw"        
 [87] "Sifan Hassan"               "Gordon Perry"              
 [89] "Kevin Breen"                "Chris Hallam"              
 [91] "Gerry O'Rourke"             "Chris Hallam"              
 [93] "Ted Vince"                  "David Holding"             
 [95] "Håkan Ericsson"             "Farid Amarouche"           
 [97] "Daniel Wesley"              "George Vandamme"           
 [99] "David Holding"              "Heinz Frei"                </code></pre>
</div>
</div>
</section>
<section id="exercises" class="level2">
<h2 class="anchored" data-anchor-id="exercises">Exercises</h2>
<ol type="1">
<li>Load the <code>tutoR</code> package and start the exercises about <code>subsetting</code> by typing the following code into your console:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>learnr<span class="sc">::</span><span class="fu">run_tutorial</span>(<span class="at">name =</span> <span class="st">"subsetting"</span>, <span class="at">package =</span> <span class="st">"tutoR"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./load_data.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Load data</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>