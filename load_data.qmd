# Load data

## Data types

There are many different data types out there, of which many can be loaded into R. Depending on the type, different commands are used within R. Sometimes, we will have to use additional packages to get access to that function, mainly `readxl` and `haven`.

```{r, results = 'asis', echo = FALSE}
formats_dat <- data.frame("Data type" = c("R objects (.Rdata, .rda)", 
                                       "single R object (.Rds)", 
                                       "text-files (.txt)",
                                       ".csv-files (.csv)",
                                       "Excel-files (.xlsx)",
                                       "SPSS-files (.sav)", 
                                       "SAS-files (.sas)", 
                                       "Stata-files (.stata)"
                                       ),
                          Import = c("````load()````",
                                       "````readRDS()````",
                                       "````read.table()````",
                                       "````read.csv()````",
                                       "````readxl::read_excel()````",
                                       "````haven::read_sav()````",
                                       "````haven::read_sas()````",
                                       "````haven::read_dta()````"),
                          Export = c("````save()````",
                                       "````saveRDS()````",
                                       "````write.table()````",
                                       "````write.csv()````",
                                       "````writexl::write_xlsx()````",
                                       "````haven::write_sav()````",
                                       "````haven::write_sas()````",
                                       "````haven::write_dta()````")
                          )

knitr::kable(formats_dat, "pipe")
```

## Absolute paths vs. relative paths

You can head to a specific file by using the full path (**absolute path**): `"C:\Users\hafiznij\Documents\GitHub\r_tutorial\raw_data\winners.rda"`. This approach has some disadvantages: it will only work on **my** notebook. If i want to continue my project on another device, i will have to change the path. The same goes for other people who want to work with my project. So, to keep these paths more reproducable, we should always use **relative paths** if possible: `".\raw_data\winners.rda"`. This will always work independently of the device i am working on, as long as i am in the correct **working directory**.

The working directory is the path R is currently working in. I can obtain it by typing:

```{r}
getwd()
```

Luckily, as long as we work with RStudio projects, we don't have to deal with that, as the working directory is set automatically by the project.

Now take a look at the working directory and the relative path i used for loading the `winners.rda`. Notice something? Correct, both paths combined equal the **absolute path** to the file. So by splitting it up, we obtain a more reproducible path, that works independent of where the current working directory is.

# Exercises

1.  For the rest of the workshop, we will use the data frame `winners` from the package [LondonMarathon](https://github.com/nrennie/LondonMarathon). I have already tweaked it a bit to make it easier to work with, so just download it from [here](https://github.com/nickhaf/r_tutorial/tree/main/raw_data) and load it into R.
2.  Advanced: Load the `continents.csv` file into R. Did that work as expected? If not, why not? ([Solution](#Solution)) *Hint*: Take a look at the .csv by opening it in a text editor. Look at the documentation of `read.csv()` and take a look at the `sep` argument.


# Solution
```{r}
#| code-fold: true
#| code-summary: "Solution for exercise 1"

winners <- readRDS(file = "./raw_data/winners.rds")
```


```{r, eval = FALSE}
#| code-fold: true
#| code-summary: "Solution for exercise 2"
continents <- read.csv(file = "./raw_data/continents.csv")

head(continents)
 
# Hmm that looks weird. If we take a look at the file by opening it in a text editor, we can see that the values are seperated by `;`. 
# So let's call the help for `read.csv()`:

?read.csv

# The `sep` argument specifies that the seperator needs to be a white space (meaning tabs, spaces ... - look at the details).  
# So, we can do the following:

continents <- read.csv(
  file = "./raw_data/continents.csv",
  sep = ";"
)

head(continents)

# This looks better! Now we can merge both data sets, so we can actually work with them.
```

