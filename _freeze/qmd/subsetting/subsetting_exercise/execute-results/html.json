{
  "hash": "a4bb80e7d6c2dcb0cac83c2314187019",
  "result": {
    "markdown": "---\ntitle: \"Subsetting data: Exercises\"\n---\n\nWe want to work more with the `characters` data set we have loaded in the [last chapter](../load_data/load_data_exercise.qmd):\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncharacters <- readRDS(file = here::here(\"raw_data\", \"characters.rds\"))\n```\n:::\n\n\nBecause subsetting data is such a basic skill, it will come up multiple times during this workshop. Here are some first exercises to get you started. \n\n## Exercise 1\nCorrect the following code, so only the first 10 rows and the last three columns are extracted:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncharacters[4:6, 10]\n```\n:::\n\n\n::: {.callout-tip collapse=\"true\"}\n## Hint\nWe have to target the rows we want to extract **before** the `,`, the columns after. \n:::\n\n::: {.callout-caution collapse=\"true\" icon=\"false\"}\n## Solution\n\n::: {.cell}\n\n```{.r .cell-code}\ncharacters[1:10, 4:6]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   uni_name notability\n1   Friends       79.7\n2   Friends       76.7\n3   Friends       74.4\n4   Friends       74.3\n5   Friends       72.6\n6   Friends       51.6\n7  Euphoria       86.5\n8  Euphoria       84.2\n9  Euphoria       82.6\n10 Euphoria       65.6\n                                                        link\n1   https://openpsychometrics.org/tests/characters/stats/F/2\n2   https://openpsychometrics.org/tests/characters/stats/F/1\n3   https://openpsychometrics.org/tests/characters/stats/F/5\n4   https://openpsychometrics.org/tests/characters/stats/F/4\n5   https://openpsychometrics.org/tests/characters/stats/F/3\n6   https://openpsychometrics.org/tests/characters/stats/F/6\n7  https://openpsychometrics.org/tests/characters/stats/EU/1\n8  https://openpsychometrics.org/tests/characters/stats/EU/2\n9  https://openpsychometrics.org/tests/characters/stats/EU/6\n10 https://openpsychometrics.org/tests/characters/stats/EU/3\n```\n:::\n:::\n\n\n:::\n\n## Exercise 2\n1. Why does the following code not work? Correct it in your own script. \n\n::: {.cell}\n\n```{.r .cell-code}\ncharacters[uni_name == \"Friends\", ]\n```\n:::\n\n\n::: {.callout-tip collapse=\"true\"}\nYou need to extract the column from the data frame with `$` before you can compare it to the string. \n:::\n\n::: {.callout-caution collapse=\"true\"}\n\n::: {.cell}\n\n```{.r .cell-code}\ncharacters[characters$uni_name == \"Friends\", ]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  id           name uni_id uni_name notability\n1 F2  Monica Geller      F  Friends       79.7\n2 F1   Rachel Green      F  Friends       76.7\n3 F5  Chandler Bing      F  Friends       74.4\n4 F4 Joey Tribbiani      F  Friends       74.3\n5 F3  Phoebe Buffay      F  Friends       72.6\n6 F6    Ross Geller      F  Friends       51.6\n                                                      link\n1 https://openpsychometrics.org/tests/characters/stats/F/2\n2 https://openpsychometrics.org/tests/characters/stats/F/1\n3 https://openpsychometrics.org/tests/characters/stats/F/5\n4 https://openpsychometrics.org/tests/characters/stats/F/4\n5 https://openpsychometrics.org/tests/characters/stats/F/3\n6 https://openpsychometrics.org/tests/characters/stats/F/6\n                                                                  image_link\n1 https://openpsychometrics.org/tests/characters/test-resources/pics/F/2.jpg\n2 https://openpsychometrics.org/tests/characters/test-resources/pics/F/1.jpg\n3 https://openpsychometrics.org/tests/characters/test-resources/pics/F/5.jpg\n4 https://openpsychometrics.org/tests/characters/test-resources/pics/F/4.jpg\n5 https://openpsychometrics.org/tests/characters/test-resources/pics/F/3.jpg\n6 https://openpsychometrics.org/tests/characters/test-resources/pics/F/6.jpg\n```\n:::\n:::\n\n:::\n\n2. Which characters will this code extract: `characters[(characters$uni_name == \"Harry Potter\" | characters$uni_name != \"Harry Potter\") & !(characters$notability > 90), ]`?\n    - [ ] All Harry Potter characters with a notability over `90`.\n    - [ ] All characters that are not from the Harry Potter universe and have a notability under 90.\n    - [ ] All characters with a notability over `90`.\n    - [ ] All characters with a notability under `90`.\n    \n::: {.callout-caution collapse=\"true\"}\n\n## Solution\n    - [ ] All Harry Potter characters with a notability over `90`.\n    - [ ] All characters that are not from the Harry Potter universe and have a notability under 90.\n    - [ ] All characters with a notability over `90`.\n    - [x] All characters with a notability under `90`.\n\nKind of a trick question: because we select all characters that are from the Harry Potter universe OR are not from there, we select all characters independent of their TV show. But we select all characters that have notability under 90 (beware of the `!` in front of the respective comparison).\n:::\n\n\n## Exercise 3\n1. Extract all characters from \"Game of Thrones\" that have a notability over `75`, using `Base R`.\n\n::: {.callout-tip collapse=\"true\"}\n## Hint\nYou need to define a logical vector which contains `TRUE` values for all \"Game of Thrones\" characters that have a notability over `75`.\n:::\n\n::: {.callout-caution collapse=\"true\"}\n## Solution\n\n::: {.cell}\n\n```{.r .cell-code}\ncharacters[characters$uni_name == \"Game of Thrones\" & characters$notability > 75, ]\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      id               name uni_id        uni_name notability\n18  GOT2   Tyrion Lannister    GOT Game of Thrones       90.8\n19  GOT5         Arya Stark    GOT Game of Thrones       90.0\n20  GOT3 Daenerys Targaryen    GOT Game of Thrones       86.8\n21  GOT1           Jon Snow    GOT Game of Thrones       86.7\n22 GOT27   Cersei Lannister    GOT Game of Thrones       82.4\n23 GOT12       Eddard Stark    GOT Game of Thrones       81.4\n24 GOT14   Brienne of Tarth    GOT Game of Thrones       79.1\n25 GOT15     Sandor Clegane    GOT Game of Thrones       76.8\n26  GOT4        Sansa Stark    GOT Game of Thrones       76.3\n27 GOT25      Olenna Tyrell    GOT Game of Thrones       75.9\n                                                          link\n18  https://openpsychometrics.org/tests/characters/stats/GOT/2\n19  https://openpsychometrics.org/tests/characters/stats/GOT/5\n20  https://openpsychometrics.org/tests/characters/stats/GOT/3\n21  https://openpsychometrics.org/tests/characters/stats/GOT/1\n22 https://openpsychometrics.org/tests/characters/stats/GOT/27\n23 https://openpsychometrics.org/tests/characters/stats/GOT/12\n24 https://openpsychometrics.org/tests/characters/stats/GOT/14\n25 https://openpsychometrics.org/tests/characters/stats/GOT/15\n26  https://openpsychometrics.org/tests/characters/stats/GOT/4\n27 https://openpsychometrics.org/tests/characters/stats/GOT/25\n                                                                      image_link\n18  https://openpsychometrics.org/tests/characters/test-resources/pics/GOT/2.jpg\n19  https://openpsychometrics.org/tests/characters/test-resources/pics/GOT/5.jpg\n20  https://openpsychometrics.org/tests/characters/test-resources/pics/GOT/3.jpg\n21  https://openpsychometrics.org/tests/characters/test-resources/pics/GOT/1.jpg\n22 https://openpsychometrics.org/tests/characters/test-resources/pics/GOT/27.jpg\n23 https://openpsychometrics.org/tests/characters/test-resources/pics/GOT/12.jpg\n24 https://openpsychometrics.org/tests/characters/test-resources/pics/GOT/14.jpg\n25 https://openpsychometrics.org/tests/characters/test-resources/pics/GOT/15.jpg\n26  https://openpsychometrics.org/tests/characters/test-resources/pics/GOT/4.jpg\n27 https://openpsychometrics.org/tests/characters/test-resources/pics/GOT/25.jpg\n```\n:::\n:::\n\n:::\n\n2. Extract all characters that are either from \"How I Met Your Mother\" or \"Breaking Bad\", using the `tidyverse`.\n\n::: {.callout-tip collapse=\"true\"}\n## Hint\nUse the `filter()` function.\n:::\n\n::: {.callout-caution collapse=\"true\"}\n## Solution\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nfilter(characters, uni_name %in% c(\"How I Met Your Mother\", \"Breaking Bad\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 15 × 7\n   id     name              uni_id uni_name          notability link  image_link\n   <chr>  <chr>             <chr>  <chr>                  <dbl> <chr> <chr>     \n 1 HIMYM4 Barney Stinson    HIMYM  How I Met Your M…       76   http… https://o…\n 2 HIMYM3 Robin Scherbatsky HIMYM  How I Met Your M…       74.2 http… https://o…\n 3 HIMYM5 Lily Aldrin       HIMYM  How I Met Your M…       74.1 http… https://o…\n 4 HIMYM2 Marshall Eriksen  HIMYM  How I Met Your M…       71   http… https://o…\n 5 HIMYM1 Ted Mosby         HIMYM  How I Met Your M…       63.7 http… https://o…\n 6 BB1    Walter White      BB     Breaking Bad            91.3 http… https://o…\n 7 BB3    Jesse Pinkman     BB     Breaking Bad            88.9 http… https://o…\n 8 BB9    Mike Ehrmantraut  BB     Breaking Bad            82.5 http… https://o…\n 9 BB8    Gus Fring         BB     Breaking Bad            79.6 http… https://o…\n10 BB4    Hank Schrader     BB     Breaking Bad            74.8 http… https://o…\n11 BB7    Saul Goodman      BB     Breaking Bad            73.8 http… https://o…\n12 BB10   Jane Margolis     BB     Breaking Bad            61.3 http… https://o…\n13 BB2    Skyler White      BB     Breaking Bad            55.4 http… https://o…\n14 BB6    Flynn White       BB     Breaking Bad            46.8 http… https://o…\n15 BB5    Marie Schrader    BB     Breaking Bad            27.9 http… https://o…\n```\n:::\n:::\n\n:::\n\n\n\n\n\n\n",
    "supporting": [
      "subsetting_exercise_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}