{
  "hash": "0c823e4a3244358a7a64739faea96337",
  "result": {
    "markdown": "# The big picture\n\nNow that we have completed our set up, let's dive right into programming with `R`. In this chapter, we will go through a \"mini-project\", which follows a typical workflow when working with data in `R`. We will install and load packages, load data, perform some operations on this data, calculate some summary statistics and plot them. In later chapters, we will go into a little bit more depth for each topic. If you want to have more in depth information instead of following the whole workflow first, you can also jump to the according chapter and read the theory. But make sure to come back to this chapter for the final exercise.\n\n## Packages\n\n[Packages](\\packages.qmd) are extensions to the `base R` you get by default. We already installed our first packages in [About this workshop](\\getting_started.qmd#about-this-workshop). Let's keep doing that and install the following package as well:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"tidyverse\")\n```\n:::\n\n\nJust by installing the packages, we can't use them. We also have to load them into our R session:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tutoR)\nlibrary(tidyverse)\n```\n:::\n\n\nThe top of your `R Script` should look something like this:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"devtools\")\ndevtools::install_github(\"nickhaf/tutoR\")\ninstall.packages(\"tidyverse\")\n\nlibrary(tutoR)\nlibrary(tidyverse)\n```\n:::\n\n\n## Load Data\n\n[Data is loaded](\\load_data.qmd) into R so you can work with it. Let's do just that. First, you need to download the file \"london_marathon.csv\" from [this link](https://github.com/nickhaf/r_tutorial/tree/getting_started/raw_data) and save it in your project folder (*Tip: Save it in a new subfolder named \"raw_data\" or somewhat similar.*). The data comes from the [LondonMarathon](https://github.com/nrennie/LondonMarathon) package. Then, you can load it into R:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nload(file = \"./raw_data/london_marathon.rda\")\n```\n:::\n\n\nThis will load the data into R. You can see it popping up in your `Environment` pane on the upper right. Note we used the `load()` function to load a data set with the ending `.rda`. Here you can find a more thourough discussion about [loading data](\\load_data.qmd). It is important you use the correct path, because otherwise R will not find your data file. Here the RStudio project we have created earlier comes in handy. It automatically knows our file lies within our project folder, which is why we can use a **relative path**, that starts at the project path and looks into the folder `raw_data` to open the file. Otherwise, we would have to use an **absolute path** (like \"C:/Users/hafiznij/Documents/GitHub/r_tutorial/raw_data/london_marathon.rda\" which will only work on my notebook, and only if my project stays in on this path.\n\n## Take a look\n\nNow that we have our data loaded safely into R, we can get an overview with a multitude of commands. One of the most important ones might be `View()`, which will open the data set excel-style in a new window:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nView(london_marathon)\n```\n:::\n\n\nEspecially for bigger data sets, it might be more feasable to only look at the structure and not the whole data set:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(london_marathon)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nClasses 'tbl_df', 'tbl' and 'data.frame':\t42 obs. of  8 variables:\n $ Date            : Date, format: \"1981-03-29\" \"1982-05-09\" ...\n $ Year            : num  1981 1982 1983 1984 1985 ...\n $ Applicants      : num  20000 90000 60000 70000 83000 80000 80000 73000 72000 73000 ...\n $ Accepted        : num  7747 18059 19735 21142 22274 ...\n $ Starters        : num  7055 16350 16500 16992 17500 ...\n $ Finishers       : num  6255 15116 15793 15675 15873 ...\n $ Raised          : num  NA NA NA NA NA NA NA NA NA NA ...\n $ Official charity: chr  NA NA NA NA ...\n```\n:::\n:::\n\n\nOn the left we can see the columns of this data.frame, named `Date`, `Year`, `Applicants` etc ... Further on the right we see the first values in each column, for example `1981`, `1982` etc ...\n\n## Data wrangling\n\nNow, lets do something fun with this data. We want to answer the question if people have gotten faster at running marathons over that last 40 years. We will use a Some sort of regression using the times or f\n\n### Merging data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nload(file = \"./raw_data/winners.rda\")\n```\n:::\n\n\n### Clean up data\n\nRemove NAs, select relevant columns, Build another Time column\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwinners$Minutes_total <- winners$Hours * 60 + winners$Minutes\n```\n:::\n\n\n### Subsetting data\n\nDivide by Category (Wheelchar vs. no wheelchair)\n\n### Regression Time vs. year\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwomen <- winners[winners$Category == \"Women\", ]\n\n\nlm_rs <- lm(Minutes_total ~ Year, women)\nsummary(lm_rs)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nCall:\nlm(formula = Minutes_total ~ Year, data = women)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-7.1827 -1.5880  0.0532  1.7458  7.6944 \n\nCoefficients:\n             Estimate Std. Error t value Pr(>|t|)    \n(Intercept) 614.65116   70.01127   8.779 5.79e-11 ***\nYear         -0.23588    0.03497  -6.745 3.78e-08 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.846 on 41 degrees of freedom\nMultiple R-squared:  0.526,\tAdjusted R-squared:  0.5144 \nF-statistic:  45.5 on 1 and 41 DF,  p-value: 3.777e-08\n```\n:::\n\n```{.r .cell-code}\n# 614 min bei Year = 0, für jedes Jahr -0.23 Min weniger:\n# 614 + 2020 * -0.236\n\n\nplot(lm_rs)\n```\n\n::: {.cell-output-display}\n![](the_big_picture_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](the_big_picture_files/figure-html/unnamed-chunk-6-2.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](the_big_picture_files/figure-html/unnamed-chunk-6-3.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](the_big_picture_files/figure-html/unnamed-chunk-6-4.png){width=672}\n:::\n:::\n\n\n### Plot the data\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# library(ggplot2)\n# winners %>%\n#   filter(Category %in% c(\"Men\", \"Women\")) %>%\n# ggplot(data = ., aes(x = Year,\n#                             y = Minutes_total, \n#                      colour = Nationality, \n#                      shape = Category)) +\n#   geom_point()\n# \n# \n# winners %>%\n#   filter(Category %in% c(\"Wheelchair Men\", \"Wheelchair Women\")) %>%\n# ggplot(data = ., aes(x = Year,\n#                             y = Minutes_total, \n#                      colour = Nationality, \n#                      shape = Category)) +\n#   geom_point()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Für die Übung. \n#install.packages(\"tidytuesdayR\")\nlibrary(tidytuesdayR)\ntuesdata <- tidytuesdayR::tt_load('2022-08-16')\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n--- Compiling #TidyTuesday Information for 2022-08-16 ----\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n--- There are 3 files available ---\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n--- Starting Download ---\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tDownloading file 1 of 3: `characters.csv`\n\tDownloading file 2 of 3: `myers_briggs.csv`\n\tDownloading file 3 of 3: `psych_stats.csv`\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n--- Download complete ---\n```\n:::\n:::\n",
    "supporting": [
      "the_big_picture_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}